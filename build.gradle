//
//lintOptions {
//    abortOnError false
//}
plugins {
    id "org.jetbrains.intellij" version "$ijpVersion"
}
//compileOptions {
//    sourceCompatibility JavaVersion.VERSION_11
//    targetCompatibility JavaVersion.VERSION_11
//}
group 'lang.plugin.idea'
version "$pluginVersion"

apply plugin: 'java'

//def sinceBuildVersion = "${sinceBuildVersion}"
//def untilBuildVersion = "${untilBuildVersion}"
// 可以在线访问： https://repo.maven.apache.org/maven2
repositories {
    mavenLocal()
    maven {
        url "https://maven.aliyun.com/nexus/content/groups/public"
    }
    maven {
        url "https://repo.maven.apache.org/maven2"
    }
    mavenCentral()
}

dependencies {
    implementation "com.googlecode.aviator:aviator:${aviatorVersion}"
    implementation "com.alibaba.fastjson2:fastjson2:${fastjsonVersion2}"
    implementation "cn.hutool:hutool-all:${hutoolVersion}"
    implementation "com.github.oshi:oshi-core:${oshiVersion}"
    implementation "net.java.dev.jna:jna:${jnaVersion}"
    implementation "io.netty:netty-all:${nettyVersion}"
    implementation "jexcelapi:jxl:${jexcelapiVersion}"
    implementation "com.alibaba:easyexcel:${easyexcelVersion}"
}

processResources {
    include('**')
    setDuplicatesStrategy(DuplicatesStrategy.INCLUDE)
}

sourceSets {

    main {
        java {
//            srcDir 'src/main/gen'
            srcDir 'fitlang-plugin-idea/src/main/java'
            srcDir 'fitlang-core/src/main/java'
//            srcDir 'src/main/gen-bnf'
//            srcDir 'src/main/gen-flex'
        }
        resources {
            srcDir 'fitlang-plugin-idea/src/main/resources'
            srcDir 'fitlang-server' exclude(".idea")
        }
    }

    test {
        java {
            srcDir 'fitlang-core/src/test/java'
        }
        resources {
            srcDir 'fitlang-core/src/test/resources'
        }
    }
}
apply plugin: 'idea'
// See https://github.com/JetBrains/gradle-intellij-plugin/
intellij {
    version = ideaVersion
    plugins = ['java']
    //不更新，强制指定，避免误更新版本号
    updateSinceUntilBuild = false
}
